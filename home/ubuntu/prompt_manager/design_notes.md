# プロンプト収集メカニズムの設計

## 1. 要件整理

### 主要要件
- ChatGPT(ブラウザ版)で入力したプロンプトを蓄積する
- 蓄積したプロンプト情報をAIに読み込ませ、改善フィードバックを得る
- APIを使わず無料で実現する
- ブラウザ版ChatGPTで完結できることが望ましい

### 技術的制約
- APIは使用不可
- 無料で実現する必要がある
- ブラウザ上で完結する必要がある

## 2. 設計方針

調査結果に基づき、以下の2つの方法を組み合わせた設計を提案します：

1. **ブックマークレットによるプロンプト収集**
   - ユーザーが簡単に実行できる
   - APIを使わずに実現可能
   - ブラウザ上で完結する

2. **ローカルストレージによるプロンプト保存**
   - ブラウザのローカルストレージにデータを保存
   - 永続的にデータを保持可能
   - 外部サービスに依存しない

## 3. システム構成

### コンポーネント構成
1. **プロンプト収集ブックマークレット**
   - ChatGPTページからプロンプトを抽出
   - 日時情報を付加
   - ローカルストレージに保存

2. **プロンプト管理ページ**
   - 保存されたプロンプトの一覧表示
   - プロンプトの編集・削除機能
   - プロンプトのエクスポート・インポート機能

3. **プロンプト分析機能**
   - 保存されたプロンプトをChatGPTに送信
   - 改善フィードバックの生成
   - フィードバック結果の表示・保存

## 4. データ構造

### プロンプトデータ
```javascript
{
  id: "一意のID（タイムスタンプ+ランダム文字列）",
  prompt: "プロンプトテキスト",
  response: "ChatGPTの応答（オプション）",
  timestamp: "作成日時",
  tags: ["タグ1", "タグ2"], // オプション
  feedback: "改善フィードバック（分析後に追加）",
  category: "カテゴリ（ユーザー定義可能）"
}
```

### ローカルストレージ構造
```javascript
{
  "prompts": [プロンプトデータの配列],
  "settings": {
    "defaultCategory": "デフォルトカテゴリ",
    "autoSave": true/false,
    "maxPrompts": 100 // 保存上限数
  }
}
```

## 5. ユーザーインターフェース

### プロンプト収集ブックマークレット
- ブラウザのブックマークバーに追加可能なJavaScriptコード
- クリックするだけでプロンプトを収集・保存
- 保存成功時に小さな通知を表示

### プロンプト管理ページ
- シンプルなHTML+CSS+JavaScriptで構成
- ローカルファイルとして保存・実行可能
- レスポンシブデザインで様々なデバイスに対応

#### 主要画面
1. **プロンプト一覧画面**
   - 保存されたプロンプトをリスト表示
   - 検索・フィルタリング機能
   - カテゴリ別表示

2. **プロンプト詳細画面**
   - プロンプト内容の表示・編集
   - タグ付け機能
   - フィードバック表示

3. **分析設定画面**
   - 分析用メタプロンプトの設定
   - 分析対象プロンプトの選択
   - 分析結果の表示形式設定

## 6. 実装方針

### フェーズ1: 基本機能実装
1. プロンプト収集ブックマークレットの作成
2. ローカルストレージ保存機能の実装
3. 基本的なプロンプト管理ページの作成

### フェーズ2: 分析機能実装
1. プロンプト分析用メタプロンプトの設計
2. ChatGPTへの分析依頼機能の実装
3. フィードバック表示機能の実装

### フェーズ3: 拡張機能実装
1. プロンプトのエクスポート・インポート機能
2. タグ・カテゴリ管理機能
3. 統計情報表示機能

## 7. 技術スタック

- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **データ保存**: LocalStorage API
- **UI フレームワーク**: 不要（シンプルなCSSで実装）
- **その他**: Blob API（ファイル保存用）

## 8. セキュリティ考慮事項

- すべてのデータはユーザーのローカル環境に保存
- 外部サーバーとの通信は行わない
- センシティブなプロンプトを扱う場合の注意点をドキュメントに記載
